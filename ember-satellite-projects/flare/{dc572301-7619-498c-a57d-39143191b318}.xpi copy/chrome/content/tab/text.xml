<?xml version="1.0"?>

<bindings id="tmp_textbindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="tmp-text-link" extends="chrome://global/content/bindings/text.xml#text-link">
    <implementation>
      <constructor>
        <![CDATA[
           let topWin = Services.wm.getMostRecentWindow("navigator:browser");
           if (!topWin || topWin.Tabmix.isVersion(200))
             return;
           eval("this.open ="+this.open.toString().replace(
             'if (uri)',
             'if (typeof win.Tabmix_openURL != "function") win.Tabmix_openURL = Tabmix.getTopWin().Tabmix.openURL.bind(Tabmix); if (uri)'
           ).replace(
              'win.open(uri.spec);',
              'win.Tabmix_openURL(uri.spec, aEvent);'
           ).replace(
              'win.open(href);',
              'win.Tabmix_openURL(href, aEvent);'
           ));
        ]]>
      </constructor>
    </implementation>
  </binding>

</bindings>
